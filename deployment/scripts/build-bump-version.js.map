{"version":3,"sources":["../../scripts/build-bump-version.js"],"names":["require","load","console","log","process","env","npm_package_version","versionBuildNumber","split","newVersion","fileName","searchString","newContentOfLine","fileLines","readFileSync","index","length","indexOf","writeFileSync","join"],"mappings":"AAAA,sB;;;;;;AAMA,oD,mFAHAA,QAAS,QAAT,EAAoBC,IAApB;;AAKAC,QAAQC,GAAR,CAAa,oCAAsCC,QAAQC,GAAR,CAAYC,mBAA/D;AACAJ,QAAQC,GAAR,CAAa,oDAAb;;AAEA,GAAII,oBAAqB,iBAAQC,KAAR,CAAe,GAAf,EAAsB,CAAtB,CAAzB;AACA,GAAID,oBAAsB,IAA1B;AACEA,mBAAqB,CAArB;;;AAGFA;AACA,GAAME,YAAaL,QAAQC,GAAR,CAAYC,mBAAZ,CAAkC,GAAlC,CAAwCC,kBAA3D;;AAEA,GAAMG,UAAW,4BAAjB;AACA,GAAMC,cAAe,yBAArB;AACA,GAAMC,kBAAmB,4BAA8BH,UAA9B,CAA2C,IAApE;;AAEA,GAAII,WAAY,aAAGC,YAAH,CAAiBJ,QAAjB,CAA2B,MAA3B,EAAoCF,KAApC,CAA2C,IAA3C,CAAhB;AACA,GAAIO,OAAQ,CAAZ;;AAEA,MAAOA,MAAQF,UAAUG,MAAzB;AACA;AACE,GAAIH,UAAWE,KAAX,EAAmBE,OAAnB,CAA4BN,YAA5B,EAA6C,CAAC,CAAlD;AACA;AACE,GAAIE,UAAWE,KAAX,GAAsBH,gBAA1B;AACEV,QAAQC,GAAR,CAAa,IAAMO,QAAN,CAAiB,yBAA9B,EADF;;AAGA;AACEG,UAAWE,KAAX,EAAqBH,gBAArB;AACA,aAAGM,aAAH,CAAkBR,QAAlB,CAA4BG,UAAUM,IAAV,CAAgB,IAAhB,CAA5B;;AAEAjB,QAAQC,GAAR,CAAa,oCAAsCM,UAAnD;AACD;AACD;AACD,CAZD;;AAcEM;AACH","file":"build-bump-version.js","sourcesContent":["import fs from 'fs'\n\n// Read environment\nrequire( 'dotenv' ).load( )\n\n\nimport {version} from '../configuration/package.js'\n\nconsole.log( 'Current version in package.json: ' + process.env.npm_package_version )\nconsole.log( 'Current version in package.js:   ' + version )\n\nlet versionBuildNumber = version.split( '.' )[ 3 ]\nif( versionBuildNumber == null )\n  versionBuildNumber = 1\n\n// Increment build\nversionBuildNumber++\nconst newVersion = process.env.npm_package_version + '.' + versionBuildNumber\n\nconst fileName = './configuration/package.js'\nconst searchString = 'export const version = '\nconst newContentOfLine = 'export const version = \\'' + newVersion + '\\''\n\nlet fileLines = fs.readFileSync( fileName, 'utf8' ).split( '\\n' )\nlet index = 0\n\nwhile( index < fileLines.length )\n{\n  if( fileLines[ index ].indexOf( searchString ) > -1 )\n  {\n    if( fileLines[ index ] == newContentOfLine )\n      console.log( '[' + fileName + '] is already up to date' )\n    else\n    {\n      fileLines[ index ] = newContentOfLine\n      fs.writeFileSync( fileName, fileLines.join( '\\n' ) )\n\n      console.log( 'New version in package.js:       ' + newVersion )\n    }\n    break\n  }\n  else\n    index++\n}\n"]}