{"version":3,"sources":["../../scripts/update-default-persister.js"],"names":["supportedPersisters","cassandra","dynamodb","memory","waterline","updateDefaultPersister","fileName","defaultPersister","console","log","resolve","writeFileSync","join","persisterName","process","argv","persisterFileName","error","name"],"mappings":";;AAEA,sB;AACA,0B;;;AAGA,GAAMA,qBAAsB;AAC1BC,UAAW,gEADe;AAE1BC,SAAU,8DAFgB;AAG1BC,OAAQ,0DAHkB;AAI1BC,UAAW,gEAJe,CAA5B;;;;AAQA,QAASC,uBAAT,CAAiCC,QAAjC;AACA;AACE,GAAMC,kBAAmB;;;AAGvB,2BAA4BD,QAA5B,KAHuB,qFAAzB;;;;;;;AAUAE,QAAQC,GAAR,CAAa,YAAc,eAAKC,OAAL,CAAc,6CAAd,CAA3B;AACA,aAAGC,aAAH,CAAkB,6CAAlB,CAAiEJ,iBAAiBK,IAAjB,CAAuB,MAAvB,CAAjE,CAAkG,MAAlG;AACD;;;AAGD,GAAMC,eAAgBC,QAAQC,IAAR,CAAc,CAAd,CAAtB;AACA,GAAMC,mBAAoBhB,oBAAqBa,aAArB,CAA1B;;AAEA,GAAIG,mBAAqB,IAAzB;AACEX,uBAAwBW,iBAAxB,EADF;;AAGA;AACER,QAAQS,KAAR,CAAe,kFAAf;AACAT,QAAQS,KAAR,CAAe,8CAAf;AACAT,QAAQS,KAAR,CAAe,oBAAf;AACA,IAAK,GAAIC,KAAT,GAAiBlB,oBAAjB;AACEQ,QAAQS,KAAR,CAAe,KAAOC,IAAtB,EADF;AAED","file":"update-default-persister.js","sourcesContent":["// @flow weak\n\nimport fs from 'fs'\nimport path from 'path'\n\n\nconst supportedPersisters = {\n  cassandra: '../../units/urb-persister-cassandra/graphql/PersisterCassandra',\n  dynamodb: '../../units/urb-persister-dynamodb/graphql/PersisterDynamoDB',\n  memory: '../../units/urb-persister-memory/graphql/PersisterMemory',\n  waterline: '../../units/urb-persister-waterline/graphql/PersisterWaterline',\n}\n\n\nfunction updateDefaultPersister( fileName )\n{\n  const defaultPersister = [\n    `// @flow weak`,\n    ``,\n    `import Persister from '` + fileName + `'`,\n    ``,\n    ``,\n    `const defaultPersister = new Persister( )`,\n    `export default defaultPersister`,\n  ]\n\n  console.log( 'Written: ' + path.resolve( './configuration/graphql/defaultPersister.js' ) )\n  fs.writeFileSync( './configuration/graphql/defaultPersister.js', defaultPersister.join( '\\r\\n' ), 'utf8' )\n}\n\n\nconst persisterName = process.argv[ 2 ]\nconst persisterFileName = supportedPersisters[ persisterName ]\n\nif( persisterFileName != null )\n  updateDefaultPersister( persisterFileName )\nelse\n{\n  console.error( \"Error: Default persister not specified. Specify default persister, for instance:\" )\n  console.error( \"  npm run update-default-persister -- memory\" )\n  console.error( \"Valid options are:\" )\n  for( let name in supportedPersisters )\n    console.error( \"  \" + name )\n}\n"]}