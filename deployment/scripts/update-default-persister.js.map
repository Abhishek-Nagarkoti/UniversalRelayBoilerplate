{"version":3,"sources":["../../scripts/update-default-persister.js"],"names":["supportedPersisters","cassandra","dynamodb","memory","waterline","updateDefaultPersister","fileName","defaultPersister","console","log","resolve","writeFileSync","join","persisterName","process","argv","persisterFileName","error","name"],"mappings":";;AAEA,sB;AACA,0B;;AAEA,GAAMA,qBAAsB;AAC1BC,UAAW,gEADe;AAE1BC,SAAU,8DAFgB;AAG1BC,OAAQ,0DAHkB;AAI1BC,UAAW,gEAJe,CAA5B;;;AAOA,QAASC,uBAAT,CAAgCC,QAAhC,CAA0C;AACxC,GAAMC,kBAAmB;;;AAGvB,0BAA4BD,QAA5B,IAHuB,qFAAzB;;;;;;;AAUAE,QAAQC,GAAR;AACE,YAAc,eAAKC,OAAL,CAAa,6CAAb,CADhB;;AAGA,aAAGC,aAAH;AACE,6CADF;AAEEJ,iBAAiBK,IAAjB,CAAsB,MAAtB,CAFF;AAGE,MAHF;;AAKD;;AAED,GAAMC,eAAgBC,QAAQC,IAAR,CAAa,CAAb,CAAtB;AACA,GAAMC,mBAAoBhB,oBAAoBa,aAApB,CAA1B;;AAEA,GAAIG,mBAAqB,IAAzB,CAA+BX,uBAAuBW,iBAAvB,EAA/B;AACK;AACHR,QAAQS,KAAR;AACE,kFADF;;AAGAT,QAAQS,KAAR,CAAc,8CAAd;AACAT,QAAQS,KAAR,CAAc,oBAAd;AACA,IAAK,GAAIC,KAAT,GAAiBlB,oBAAjB;AACEQ,QAAQS,KAAR,CAAc,KAAOC,IAArB,EADF;AAED","file":"update-default-persister.js","sourcesContent":["// @flow\n\nimport fs from \"fs\"\nimport path from \"path\"\n\nconst supportedPersisters = {\n  cassandra: \"../../units/urb-persister-cassandra/graphql/PersisterCassandra\",\n  dynamodb: \"../../units/urb-persister-dynamodb/graphql/PersisterDynamoDB\",\n  memory: \"../../units/urb-persister-memory/graphql/PersisterMemory\",\n  waterline: \"../../units/urb-persister-waterline/graphql/PersisterWaterline\",\n}\n\nfunction updateDefaultPersister(fileName) {\n  const defaultPersister = [\n    `// @flow`,\n    ``,\n    `import Persister from '` + fileName + `'`,\n    ``,\n    ``,\n    `const defaultPersister = new Persister( )`,\n    `export default defaultPersister`,\n  ]\n\n  console.log(\n    \"Written: \" + path.resolve(\"./configuration/graphql/defaultPersister.js\"),\n  )\n  fs.writeFileSync(\n    \"./configuration/graphql/defaultPersister.js\",\n    defaultPersister.join(\"\\r\\n\"),\n    \"utf8\",\n  )\n}\n\nconst persisterName = process.argv[2]\nconst persisterFileName = supportedPersisters[persisterName]\n\nif (persisterFileName != null) updateDefaultPersister(persisterFileName)\nelse {\n  console.error(\n    \"Error: Default persister not specified. Specify default persister, for instance:\",\n  )\n  console.error(\"  npm run update-default-persister -- memory\")\n  console.error(\"Valid options are:\")\n  for (let name in supportedPersisters)\n    console.error(\"  \" + name)\n}\n"]}