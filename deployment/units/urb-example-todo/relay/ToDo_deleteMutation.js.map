{"version":3,"sources":["../../../../units/urb-example-todo/relay/ToDo_deleteMutation.js"],"names":["ToDo_deleteMutation","type","parentName","parentID","props","Viewer","id","connectionName","deletedIDFieldName","ToDo","ViewerPayload","ToDo_CompletedCount","ToDo_Complete","ToDo_TotalCount","deletedToDoId","Mutation","fragments"],"mappings":";;AAEA,uC;;AAEqBA,mB;;;;;;;;;;;;;;;;;;AAkBL;AACZ;AACD,C;AACa;AACZ;;;;;;;;;AASD,C;AACY;AACX,MAAO;AACL;AACEC,KAAM,aADR;AAEEC,WAAY,QAFd;AAGEC,SAAU,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,EAH9B;AAIEC,eAAgB,OAJlB;AAKEC,mBAAoB,eALtB,CADK,CAAP;;;AASD,C;AACc;AACb,MAAO;AACLF,GAAI,KAAKF,KAAL,CAAWK,IAAX,CAAgBH,EADf,CAAP;;AAGD,C;AACuB;AACtB,GAAII,eAAgB,CAAEJ,GAAI,KAAKF,KAAL,CAAWC,MAAX,CAAkBC,EAAxB,CAApB;AACA,GAAI,KAAKF,KAAL,CAAWC,MAAX,CAAkBM,mBAAlB,EAAyC,IAA7C,CAAmD;AACjDD,cAAcC,mBAAd,CAAoC,KAAKP,KAAL,CAAWK,IAAX,CAAgBG,aAAhB,GAAkC,IAAlC;AAChC,KAAKR,KAAL,CAAWC,MAAX,CAAkBM,mBAAlB,CAAwC,CADR;AAEhC,KAAKP,KAAL,CAAWC,MAAX,CAAkBM,mBAFtB;AAGD;AACD,GAAI,KAAKP,KAAL,CAAWC,MAAX,CAAkBQ,eAAlB,EAAqC,IAAzC,CAA+C;AAC7CH,cAAcG,eAAd,CAAgC,KAAKT,KAAL,CAAWC,MAAX,CAAkBQ,eAAlB,CAAoC,CAApE;AACD;AACD,MAAO;AACLC,cAAe,KAAKV,KAAL,CAAWK,IAAX,CAAgBH,EAD1B;AAELD,OAAQK,aAFH,CAAP;;AAID,C,iCA9D8C,qBAAMK,Q,EAAlCf,mB,CACZgB,S,CAAY,CAEjBP,KAAM,mTAFW,CASjBJ,OAAQ,6XATS,C,iBADAL,mB","file":"ToDo_deleteMutation.js","sourcesContent":["// @flow\n\nimport Relay from 'react-relay'\n\nexport default class ToDo_deleteMutation extends Relay.Mutation {\n  static fragments = {\n    // TODO: Mark ToDo_Complete as optional\n    ToDo: () => Relay.QL`\n      fragment on ToDo {\n        ToDo_Complete,\n        id,\n      }\n    `,\n    // TODO: Mark ToDo_CompletedCount and ToDo_TotalCount as optional\n    Viewer: () => Relay.QL`\n      fragment on Viewer {\n        ToDo_CompletedCount,\n        id,\n        ToDo_TotalCount,\n      }\n    `,\n  }\n  getMutation() {\n    return Relay.QL`mutation{ToDo_delete}`\n  }\n  getFatQuery() {\n    return Relay.QL`\n      fragment on ToDo_deletePayload {\n        deletedToDoId,\n        Viewer {\n          ToDo_CompletedCount,\n          ToDo_TotalCount,\n        },\n      }\n    `\n  }\n  getConfigs() {\n    return [\n      {\n        type: 'NODE_DELETE',\n        parentName: 'Viewer',\n        parentID: this.props.Viewer.id,\n        connectionName: 'ToDos',\n        deletedIDFieldName: 'deletedToDoId',\n      },\n    ]\n  }\n  getVariables() {\n    return {\n      id: this.props.ToDo.id,\n    }\n  }\n  getOptimisticResponse() {\n    var ViewerPayload = { id: this.props.Viewer.id }\n    if (this.props.Viewer.ToDo_CompletedCount != null) {\n      ViewerPayload.ToDo_CompletedCount = this.props.ToDo.ToDo_Complete === true\n        ? this.props.Viewer.ToDo_CompletedCount - 1\n        : this.props.Viewer.ToDo_CompletedCount\n    }\n    if (this.props.Viewer.ToDo_TotalCount != null) {\n      ViewerPayload.ToDo_TotalCount = this.props.Viewer.ToDo_TotalCount - 1\n    }\n    return {\n      deletedToDoId: this.props.ToDo.id,\n      Viewer: ViewerPayload,\n    }\n  }\n}\n"]}