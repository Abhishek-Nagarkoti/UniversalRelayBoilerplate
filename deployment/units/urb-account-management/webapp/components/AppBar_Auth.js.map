{"version":3,"sources":["../../../../../units/urb-account-management/webapp/components/AppBar_Auth.js"],"names":["styles","popover","padding","isAccountNameAcceptable","AccountName","length","AppBar_Auth","props","context","_callback_OpenAuthenticationChallenge","setState","User_AccountName","User_AccountPassword","Account_information_Supplied","Dialog_AuthenticationChallenge_IsOpen","Dialog_AuthenticationInProgress_IsOpen","Dialog_AuthenticationFailed_IsOpen","Dialog_CreateUser_IsOpen","Dialog_CreateUserInProgress_IsOpen","Dialog_CreateUserFailed_IsOpen","Dialog_LogOutConfirmation_IsOpen","Dialog_LogOutInProgress_IsOpen","Dialog_LogOutFailed_IsOpen","Popover_AuthorizedUser_IsOpen","Dialog_AuthenticationChallenge_Open","_handle_onChange_AuthenticationChallenge_User_AccountName","event","target","value","_handle_onChange_AuthenticationChallenge_User_AccountName_or_Password","state","_handle_onKeyDown_AuthenticationChallenge_User_AccountName","e","keyCode","refs","focus","_handle_onChange_AuthenticationChallenge_User_AccountPassword","_handle_onKeyDown_AuthenticationChallenge_User_AccountPassword","_handle_onTouchTap_AuthenticationChallenge_LogIn","AccountPassword","loc","window","location","host","protocol","hostname","port","response","_handle_Authentication_Response_Success","_handle_Authentication_Response_Failure","_handle_onTouchTap_AuthenticationChallenge_CreateUser","Dialog_CreateUser_AccountPasswordStrength","_handle_onTouchTap_AuthenticationChallenge_Cancel","_handle_onTouchTap_AuthenticationInProgress_Cancel","_handle_onTouchTap_LogInFailure_OK","_handle_onChange_CreateUser_User_AccountName","_handle_onChange_CreateUser_User_AccountName_or_Password","_handle_onKeyDown_CreateUser_User_AccountName","_handle_onChange_CreateUser_User_AccountPassword","_handle_onKeyDown_CreateUser_User_AccountPassword","_handle_onTouchTap_CreateUser_Create","passwordScore","_handle_CreateUser_Response_Success","_handle_CreateUser_Response_Failure","_handle_onTouchTap_CreateUser_Cancel","_handle_onTouchTap_CreateUserInProgress_Cancel","_handle_onTouchTap_CreateUserFailed_OK","_handle_onTouchTap_LogOutConfirmation_LogOut","_handle_LogOutConfirmation_Response_Success","_handle_LogOutConfirmation_Response_Failure","_handle_onTouchTap_LogOutConfirmation_Cancel","_handle_onTouchTap_LogOutInProgress_Cancel","_handle_onTouchTap_LogOutFailed_OK","_handle_Popover_AuthorizedUser_Profile","router","push","_handle_Popover_AuthorizedUser_ChangePassword","_handle_Popover_AuthorizedUser_LogInAsADifferentUser","_handle_Popover_AuthorizedUser_LogOut","_handle_Popover_AuthorizedUser_Close","_handle_AuthorizedUserIcon_TouchTap","anchorEl","currentTarget","responseJSON","JSON","parse","success","Error","err","replace","href","message","error","Dialog_AuthenticationFailed_Message","Dialog_CreateUserFailed_Message","Dialog_LogOutFailed_Message","Viewer","horizontal","vertical","User_IsAnonymous","Dialog_AuthenticationChallenge","Dialog_AuthenticationInProgress","Dialog_AuthenticationFailed","Dialog_CreateUser","Dialog_CreateUserInProgress","Dialog_CreateUserFailed","Popover_AuthorizedUser","Dialog_LogOutConfirmation","Dialog_LogOutInProgress","Dialog_LogOutFailed","Component","contextTypes","PropTypes","object","isRequired","createContainer","fragments"],"mappings":"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","file":"AppBar_Auth.js","sourcesContent":["// @flow weak\n\n\nimport React from 'react';\nimport Relay from 'react-relay';\n\nimport Dialog from 'material-ui/Dialog';\nimport Divider from 'material-ui/Divider';\nimport FlatButton from 'material-ui/FlatButton';\nimport IconButton from 'material-ui/IconButton';\nimport IconSocialPerson from 'material-ui/svg-icons/social/person';\nimport IconSocialPersonOutline from 'material-ui/svg-icons/social/person-outline';\nimport LinearProgress from 'material-ui/LinearProgress';\nimport {List, ListItem} from 'material-ui/List';\nimport Popover from 'material-ui/Popover';\nimport Subheader from 'material-ui/Subheader';\nimport TextField from 'material-ui/TextField';\nimport {white} from 'material-ui/styles/colors';\nimport { registerAuthenticationRequiredCallback } from './RequiresAuthentication.js';\n\nimport {\n  AccountNameLengthMin,\n  AccountPasswordLengthMin,\n  AccountPasswordStrengthMin,\n  AccountPasswordStrengthGood,\n  AccountNameAlias,\n  AccountNameAdditionalValidation,\n} from '../../../../configuration/units/urb-account-management/accountNameAndPasswordRequirements';\nimport {ExtensionsForLogIn, ExtensionsForCreateUser} from '../../../../configuration/units/urb-account-management/webapp/components/AccountManagementExtensions'\nimport {postXHR} from '../../../../webapp/scripts/XHR';\nimport scorePassword from '../../../../configuration/units/urb-account-management/scripts/scorePassword';\nimport UserListItem from '../../../../configuration/webapp/components/UserListItem';\n\nconst styles = {\n  popover: {\n    padding: 10,\n  },\n};\n\nfunction isAccountNameAcceptable( AccountName )\n{\n  if( AccountName.length <  AccountNameLengthMin )\n    return false\n\n  return AccountNameAdditionalValidation( AccountName )\n}\n\nclass AppBar_Auth extends React.Component\n{\n  constructor( props, context )\n  {\n    super( props, context );\n\n    this.state = {\n      User_AccountName: '',\n      User_AccountPassword: '',\n      Account_information_Supplied: false,\n      Dialog_AuthenticationChallenge_IsOpen: false,\n      Dialog_AuthenticationInProgress_IsOpen: false,\n      Dialog_AuthenticationFailed_IsOpen: false,\n      Dialog_CreateUser_IsOpen : false,\n      Dialog_CreateUserInProgress_IsOpen: false,\n      Dialog_CreateUserFailed_IsOpen: false,\n      Dialog_LogOutConfirmation_IsOpen : false,\n      Dialog_LogOutInProgress_IsOpen: false,\n      Dialog_LogOutFailed_IsOpen: false,\n      Popover_AuthorizedUser_IsOpen : false,\n    };\n  }\n\n\n\n  // Handle popping open the login dialog if authentication is required\n  componentWillMount( )\n  {\n    registerAuthenticationRequiredCallback( this._callback_OpenAuthenticationChallenge );\n  }\n\n  componentWillUnmount( )\n  {\n    registerAuthenticationRequiredCallback( null );\n  }\n\n  _callback_OpenAuthenticationChallenge = ( ) =>\n  {\n    this.setState( {\n      User_AccountName: '',\n      User_AccountPassword: '',\n      Account_information_Supplied: false,\n      Dialog_AuthenticationChallenge_IsOpen: true,\n      Dialog_AuthenticationInProgress_IsOpen: false,\n      Dialog_AuthenticationFailed_IsOpen: false,\n      Dialog_CreateUser_IsOpen : false,\n      Dialog_CreateUserInProgress_IsOpen: false,\n      Dialog_CreateUserFailed_IsOpen: false,\n      Dialog_LogOutConfirmation_IsOpen : false,\n      Dialog_LogOutInProgress_IsOpen: false,\n      Dialog_LogOutFailed_IsOpen: false,\n      Popover_AuthorizedUser_IsOpen : false,\n    } );\n  };\n\n\n\n\n  //\n\n  _handle_Authentication_Response_Success( response )\n  {\n    try{\n      let responseJSON = JSON.parse( response );\n      if( responseJSON.success != true ) throw new Error( \"Login failed\" );\n    } catch( err ) { this._handle_Authentication_Response_Failure( \"1\" ); return; }\n\n    location.replace( location.href );\n  }\n\n  _handle_Authentication_Response_Failure( response : string )\n  {\n    let message;\n    try{\n      let responseJSON = JSON.parse( response );\n      message = responseJSON.error;\n    } catch( err ) { message = \"Improper server response\"; }\n\n    this.setState( {\n      Dialog_AuthenticationInProgress_IsOpen: false,\n      Dialog_AuthenticationFailed_IsOpen: true,\n      Dialog_AuthenticationFailed_Message: message,\n    } );\n  }\n\n\n\n  //\n\n  _handle_CreateUser_Response_Success( response )\n  {\n    try{\n      let responseJSON = JSON.parse( response );\n      if( responseJSON.success != true ) throw new Error( \"New User Creation failed\" );\n    } catch( err ) { this._handle_CreateUser_Response_Failure( \"1\" ); return; }\n\n    location.replace( location.href );\n  }\n\n  _handle_CreateUser_Response_Failure( response : string )\n  {\n    let message;\n    try{\n      let responseJSON = JSON.parse( response );\n      message = responseJSON.error;\n    } catch( err ) { message = \"Improper server response\"; }\n\n    this.setState( {\n      Dialog_CreateUserInProgress_IsOpen: false,\n      Dialog_CreateUserFailed_IsOpen: true,\n      Dialog_CreateUserFailed_Message: message,\n    } );\n  }\n\n\n\n  //\n\n  _handle_LogOutConfirmation_Response_Success( response )\n  {\n    try{\n      let responseJSON = JSON.parse( response );\n      if( responseJSON.success != true ) throw new Error( \"Log Out failed\" );\n    } catch( err ) { this._handle_LogOutConfirmation_Response_Failure( \"1\" ); return; }\n\n    location.replace( location.href );\n  }\n\n  _handle_LogOutConfirmation_Response_Failure( response )\n  {\n    let message;\n    try{\n      let responseJSON = JSON.parse( response );\n      message = responseJSON.error;\n    } catch( err ) { message = \"Improper server response\"; }\n\n    this.setState( {\n      Dialog_LogOutInProgress_IsOpen: false,\n      Dialog_LogOutFailed_IsOpen: true,\n      Dialog_LogOutFailed_Message: message,\n    } );\n  }\n\n\n\n  //\n\n\n\n\n\n\n\n\n  //\n\n  Dialog_AuthenticationChallenge( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_AuthenticationChallenge_IsOpen }\n        title=\"Log In\"\n        actions={ [\n          <FlatButton key=\"CreateUser\" label=\"Create User\" secondary={true} onTouchTap={ this._handle_onTouchTap_AuthenticationChallenge_CreateUser } />,\n          <FlatButton key=\"Cancel\" label=\"Cancel\" onTouchTap={ this._handle_onTouchTap_AuthenticationChallenge_Cancel } />,\n          <FlatButton key=\"LogIn\" label=\"Log In\" primary={true} onTouchTap={ this._handle_onTouchTap_AuthenticationChallenge_LogIn } disabled={ ! this.state.Account_information_Supplied } />,\n        ] }\n      >\n        <TextField\n          floatingLabelText={ AccountNameAlias }\n          fullWidth={ true }\n          value={ this.state.User_AccountName }\n          onKeyDown={ this._handle_onKeyDown_AuthenticationChallenge_User_AccountName }\n          onChange={ this._handle_onChange_AuthenticationChallenge_User_AccountName }\n        />\n        <TextField\n          type=\"password\"\n          floatingLabelText=\"Password\"\n          fullWidth={ true }\n          value={ this.state.User_AccountPassword }\n          onKeyDown={ this._handle_onKeyDown_AuthenticationChallenge_User_AccountPassword }\n          onChange={ this._handle_onChange_AuthenticationChallenge_User_AccountPassword }\n          ref=\"User_AccountPassword\"\n        />\n        <ExtensionsForLogIn/>\n      </Dialog>\n    );\n  }\n\n  Dialog_AuthenticationChallenge_Open = ( ) =>\n  {\n    this.setState( {\n      Dialog_AuthenticationChallenge_IsOpen: true\n    } );\n  };\n\n  _handle_onChange_AuthenticationChallenge_User_AccountName = ( event ) =>\n  {\n    this.setState( { User_AccountName: event.target.value } );\n    this._handle_onChange_AuthenticationChallenge_User_AccountName_or_Password( event.target.value, this.state.User_AccountPassword );\n  };\n\n  _handle_onKeyDown_AuthenticationChallenge_User_AccountName = ( e ) =>\n  {\n    if( e.keyCode === 13 )\n      this.refs.User_AccountPassword.focus( );\n  };\n\n  _handle_onChange_AuthenticationChallenge_User_AccountPassword = ( event ) =>\n  {\n    this.setState( { User_AccountPassword: event.target.value } );\n    this._handle_onChange_AuthenticationChallenge_User_AccountName_or_Password( this.state.User_AccountName, event.target.value );\n  };\n\n  _handle_onKeyDown_AuthenticationChallenge_User_AccountPassword = ( e ) =>\n  {\n    if( e.keyCode === 13 )\n      this._handle_onTouchTap_AuthenticationChallenge_LogIn( );\n  };\n\n  _handle_onChange_AuthenticationChallenge_User_AccountName_or_Password = ( AccountName, AccountPassword ) =>\n  {\n    this.setState( { Account_information_Supplied: isAccountNameAcceptable( AccountName ) && AccountPassword.length >= AccountPasswordLengthMin } );\n  };\n\n  _handle_onTouchTap_AuthenticationChallenge_LogIn = ( ) =>\n  {\n    this.setState( {\n      Dialog_AuthenticationChallenge_IsOpen: false,\n      Dialog_AuthenticationInProgress_IsOpen: true,\n    } );\n\n    var loc = window.location;\n    var host = loc.protocol + \"//\" + loc.hostname + \":\" + loc.port;\n\n    postXHR(\n      host + '/auth/login',\n      {\n        User_AccountName: this.state.User_AccountName,\n        User_AccountPassword: this.state.User_AccountPassword,\n      },\n      ( response ) => this._handle_Authentication_Response_Success( response ),\n      ( response ) => this._handle_Authentication_Response_Failure( response )\n    );\n\n    this.setState( { User_AccountPassword: '' } );\n  };\n\n  _handle_onTouchTap_AuthenticationChallenge_CreateUser = ( ) =>\n  {\n    this.setState( {\n      Dialog_AuthenticationChallenge_IsOpen: false,\n      Dialog_CreateUser_IsOpen: true,\n      Dialog_CreateUser_AccountPasswordStrength: 0,\n      User_AccountPassword: '',\n    } );\n  };\n\n  _handle_onTouchTap_AuthenticationChallenge_Cancel = ( ) =>\n  {\n    this.setState( {\n      Dialog_AuthenticationChallenge_IsOpen: false\n    } );\n  };\n\n\n\n  //\n\n  Dialog_AuthenticationInProgress( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_AuthenticationInProgress_IsOpen }\n        title=\"Logging In ...\"\n        actions={ [\n          <FlatButton key=\"Cancel\" label=\"Cancel\" onTouchTap={ this._handle_onTouchTap_AuthenticationInProgress_Cancel } />,\n        ] }\n      >\n        <LinearProgress mode=\"indeterminate\" />\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_AuthenticationInProgress_Cancel = ( ) =>\n  {\n    this.setState( {\n      Dialog_AuthenticationInProgress_IsOpen: false\n    } );\n  };\n\n\n\n  //\n\n  Dialog_AuthenticationFailed( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_AuthenticationFailed_IsOpen }\n        title=\"Login failed\"\n        actions={ [\n          <FlatButton key=\"OK\" label=\"OK\" primary={true} onTouchTap={ this._handle_onTouchTap_LogInFailure_OK } />,\n        ] }\n      >\n        { this.state.Dialog_AuthenticationFailed_Message }\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_LogInFailure_OK = ( ) =>\n  {\n    this.setState( {\n      Dialog_AuthenticationFailed_IsOpen: false\n    } );\n  };\n\n\n\n\n  //\n\n  Dialog_CreateUser( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_CreateUser_IsOpen }\n        title=\"Sign Up\"\n        actions={ [\n          <FlatButton key=\"Cancel\" label=\"Cancel\" onTouchTap={ this._handle_onTouchTap_CreateUser_Cancel } />,\n          <FlatButton key=\"Create\" label=\"Create\" primary={true}\n            onTouchTap={ this._handle_onTouchTap_CreateUser_Create }\n            disabled={\n              this.state.Dialog_CreateUser_AccountPasswordStrength < AccountPasswordStrengthMin\n              || ( ! isAccountNameAcceptable( this.state.User_AccountName ) )\n            }\n          />,\n        ] }\n      >\n        <TextField\n          floatingLabelText={ AccountNameAlias }\n          fullWidth={ true }\n          value={ this.state.User_AccountName }\n          onKeyDown={ this._handle_onKeyDown_CreateUser_User_AccountName }\n          onChange={ this._handle_onChange_CreateUser_User_AccountName }\n        />\n        <TextField\n          type=\"password\"\n          floatingLabelText=\"Password\"\n          fullWidth={ true }\n          value={ this.state.User_AccountPassword }\n          onKeyDown={ this._handle_onKeyDown_CreateUser_User_AccountPassword }\n          onChange={ this._handle_onChange_CreateUser_User_AccountPassword }\n          ref=\"User_AccountPassword\"\n        />\n        <br/><br/>Password strength\n        <LinearProgress\n          mode=\"determinate\"\n          value={ this.state.Dialog_CreateUser_AccountPasswordStrength }\n          color={\n            this.state.Dialog_CreateUser_AccountPasswordStrength < AccountPasswordStrengthMin ?\n              \"#ff0000\"\n              : ( this.state.Dialog_CreateUser_AccountPasswordStrength < AccountPasswordStrengthGood ?\n                \"#c0c000\"\n                : \"#00d000\" )\n          }\n        />\n        <ExtensionsForCreateUser/>\n      </Dialog>\n    );\n  }\n\n  _handle_onChange_CreateUser_User_AccountName = ( event ) =>\n  {\n    this.setState( { User_AccountName: event.target.value } );\n    this._handle_onChange_CreateUser_User_AccountName_or_Password( event.target.value, this.state.User_AccountPassword );\n  };\n\n  _handle_onKeyDown_CreateUser_User_AccountName = ( e ) =>\n  {\n    if( e.keyCode === 13 )\n      this.refs.User_AccountPassword.focus( );\n  };\n\n  _handle_onChange_CreateUser_User_AccountPassword = ( event ) =>\n  {\n    this.setState( { User_AccountPassword: event.target.value } );\n    this._handle_onChange_CreateUser_User_AccountName_or_Password( this.state.User_AccountName, event.target.value );\n  };\n\n  _handle_onKeyDown_CreateUser_User_AccountPassword = ( e ) =>\n  {\n    if( e.keyCode === 13 )\n      this._handle_onTouchTap_CreateUser_Create( );\n  };\n\n  _handle_onChange_CreateUser_User_AccountName_or_Password = ( AccountName, AccountPassword ) =>\n  {\n    const passwordScore = scorePassword( AccountPassword );\n    this.setState( {\n      Account_information_Supplied: isAccountNameAcceptable( AccountName ) && AccountPassword.length >= AccountPasswordLengthMin,\n      Dialog_CreateUser_AccountPasswordStrength: passwordScore,\n    } );\n  };\n\n  _handle_onTouchTap_CreateUser_Create = ( ) =>\n  {\n    this.setState( {\n      Dialog_CreateUser_IsOpen: false,\n      Dialog_CreateUserInProgress_IsOpen: true,\n    } );\n\n    var loc = window.location;\n    var host = loc.protocol + \"//\" + loc.hostname + \":\" + loc.port;\n\n    postXHR(\n      host + '/auth/createuser',\n      {\n        User_AccountName: this.state.User_AccountName,\n        User_AccountPassword: this.state.User_AccountPassword,\n      },\n      ( response ) => this._handle_CreateUser_Response_Success( response ),\n      ( response ) => this._handle_CreateUser_Response_Failure( response )\n    );\n  };\n\n  _handle_onTouchTap_CreateUser_Cancel = ( ) =>\n  {\n    this.setState( {\n      Dialog_CreateUser_IsOpen: false\n    } );\n  };\n\n\n\n  //\n\n  Dialog_CreateUserInProgress( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_CreateUserInProgress_IsOpen }\n        title=\"Creating user ...\"\n        actions={ [\n          <FlatButton key=\"Cancel\" label=\"Cancel\" onTouchTap={ this._handle_onTouchTap_CreateUserInProgress_Cancel } />,\n        ] }\n      >\n        <LinearProgress mode=\"indeterminate\" />\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_CreateUserInProgress_Cancel = ( ) =>\n  {\n    this.setState( {\n      Dialog_CreateUserInProgress_IsOpen: false\n    } );\n  };\n\n\n\n\n  //\n\n  Dialog_CreateUserFailed( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_CreateUserFailed_IsOpen }\n        title=\"Creating user failed\"\n        actions={ [\n          <FlatButton key=\"OK\" label=\"OK\" primary={true} onTouchTap={ this._handle_onTouchTap_CreateUserFailed_OK } />,\n        ] }\n      >\n        { this.state.Dialog_CreateUserFailed_Message }\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_CreateUserFailed_OK = ( ) =>\n  {\n    this.setState( {\n      Dialog_CreateUserFailed_IsOpen: false\n    } );\n  };\n\n\n\n  //\n\n  Dialog_LogOutConfirmation( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_LogOutConfirmation_IsOpen }\n        title=\"Log Out\"\n        actions={ [\n          <FlatButton key=\"Cancel\" label=\"Cancel\" onTouchTap={ this._handle_onTouchTap_LogOutConfirmation_Cancel } />,\n          <FlatButton key=\"LogOut\" label=\"Log Out\" primary={true} onTouchTap={ this._handle_onTouchTap_LogOutConfirmation_LogOut } />,\n        ] }\n      >\n      <List>\n        <Subheader>You are currently logged in as</Subheader>\n        <UserListItem Viewer={ this.props.Viewer } />\n      </List>\n      <List>\n        <Subheader>Are you sure you want to log out?</Subheader>\n      </List>\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_LogOutConfirmation_LogOut = ( ) =>\n  {\n    this.setState( {\n      Dialog_LogOutConfirmation_IsOpen: false,\n      Dialog_LogOutInProgress_IsOpen: true,\n    } );\n\n    var loc = window.location;\n    var host = loc.protocol + \"//\" + loc.hostname + \":\" + loc.port;\n\n    postXHR(\n      host + '/auth/logout',\n      { },\n      ( response ) => this._handle_LogOutConfirmation_Response_Success( response ),\n      ( response ) => this._handle_LogOutConfirmation_Response_Failure( response )\n    );\n  };\n\n  _handle_onTouchTap_LogOutConfirmation_Cancel = ( ) =>\n  {\n    this.setState( {\n      Dialog_LogOutConfirmation_IsOpen: false\n    } );\n  };\n\n\n\n  //\n\n  Dialog_LogOutInProgress( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_LogOutInProgress_IsOpen }\n        title=\"Logging out ...\"\n        actions={ [\n          <FlatButton key=\"Cancel\" label=\"Cancel\" onTouchTap={ this._handle_onTouchTap_LogOutInProgress_Cancel } />,\n        ] }\n      >\n        <LinearProgress mode=\"indeterminate\" />\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_LogOutInProgress_Cancel = ( ) =>\n  {\n    this.setState( {\n      Dialog_LogOutInProgress_IsOpen: false\n    } );\n  };\n\n\n\n\n  //\n\n  Dialog_LogOutFailed( )\n  {\n    return(\n      <Dialog\n        open={ this.state.Dialog_LogOutFailed_IsOpen }\n        title=\"Log out failed.\"\n        actions={ [\n          <FlatButton key=\"OK\" label=\"OK\" primary={true} onTouchTap={ this._handle_onTouchTap_LogOutFailed_OK } />,\n        ] }\n      >\n        <List>\n          <Subheader>You are still logged in as</Subheader>\n          <UserListItem Viewer={ this.props.Viewer } />\n        </List>\n        <List>\n          <Subheader>{ this.state.Dialog_LogOutFailed_Message }</Subheader>\n        </List>\n      </Dialog>\n    );\n  }\n\n  _handle_onTouchTap_LogOutFailed_OK = ( ) =>\n  {\n    this.setState( {\n      Dialog_LogOutFailed_IsOpen: false\n    } );\n  };\n\n\n\n  //\n\n  Popover_AuthorizedUser( )\n  {\n    return (\n      <Popover\n        open={this.state.Popover_AuthorizedUser_IsOpen}\n        anchorEl={this.state.anchorEl}\n        anchorOrigin={{horizontal: 'left', vertical: 'bottom'}}\n        targetOrigin={{horizontal: 'left', vertical: 'top'}}\n        onRequestClose={this._handle_Popover_AuthorizedUser_Close}\n      >\n        <div style={styles.popover}>\n          <List>\n            <Subheader>Logged In as</Subheader>\n            <UserListItem Viewer={ this.props.Viewer } />\n          </List>\n          <Divider />\n          <List>\n            <ListItem primaryText=\"Profile\" onTouchTap={ this._handle_Popover_AuthorizedUser_Profile } />\n            <ListItem primaryText=\"Change Password\" onTouchTap={ this._handle_Popover_AuthorizedUser_ChangePassword } />\n          </List>\n          <Divider />\n          <List>\n            <ListItem primaryText=\"Log in as a different user\" onTouchTap={ this._handle_Popover_AuthorizedUser_LogInAsADifferentUser } />\n            <ListItem primaryText=\"Log out\" onTouchTap={ this._handle_Popover_AuthorizedUser_LogOut } />\n          </List>\n        </div>\n      </Popover>\n    );\n  }\n\n  _handle_Popover_AuthorizedUser_Profile = ( ) =>\n  {\n    this.setState( {\n      Popover_AuthorizedUser_IsOpen: false,\n    } );\n    this.context.router.push( '/user' );\n  };\n\n  _handle_Popover_AuthorizedUser_ChangePassword = ( ) =>\n  {\n    this.setState( {\n      Popover_AuthorizedUser_IsOpen: false,\n    } );\n    this.context.router.push( '/user/update_password' );\n  };\n\n  _handle_Popover_AuthorizedUser_LogInAsADifferentUser = ( ) =>\n  {\n    this.setState( {\n      Popover_AuthorizedUser_IsOpen: false,\n    } );\n    this.Dialog_AuthenticationChallenge_Open( );\n  };\n\n  _handle_Popover_AuthorizedUser_LogOut = ( ) =>\n  {\n    this.setState( {\n      Popover_AuthorizedUser_IsOpen: false,\n      Dialog_LogOutConfirmation_IsOpen: true\n    } );\n  };\n\n  _handle_Popover_AuthorizedUser_Close = ( ) =>\n  {\n    this.setState( {\n      Popover_AuthorizedUser_IsOpen: false,\n    } );\n  };\n\n\n\n  //\n\n  render( )\n  {\n    if( this.props.Viewer.User_IsAnonymous )\n      return(\n        <IconButton key='login' tooltip=\"Log In\" onTouchTap={ this.Dialog_AuthenticationChallenge_Open }>\n          <IconSocialPersonOutline color={ white } />\n          { this.Dialog_AuthenticationChallenge( ) }\n          { this.Dialog_AuthenticationInProgress( ) }\n          { this.Dialog_AuthenticationFailed( ) }\n          { this.Dialog_CreateUser( ) }\n          { this.Dialog_CreateUserInProgress( ) }\n          { this.Dialog_CreateUserFailed( ) }\n        </IconButton>\n      );\n    else\n      // User has already logged in\n      return(\n        <IconButton key='authenticated' tooltip=\"User menu\" onTouchTap={ this._handle_AuthorizedUserIcon_TouchTap }>\n          <IconSocialPerson color={ white } />\n          { this.Popover_AuthorizedUser( ) }\n          { this.Dialog_AuthenticationChallenge( ) }\n          { this.Dialog_AuthenticationInProgress( ) }\n          { this.Dialog_AuthenticationFailed( ) }\n          { this.Dialog_CreateUser( ) }\n          { this.Dialog_CreateUserInProgress( ) }\n          { this.Dialog_CreateUserFailed( ) }\n          { this.Dialog_LogOutConfirmation( ) }\n          { this.Dialog_LogOutInProgress( ) }\n          { this.Dialog_LogOutFailed( ) }\n        </IconButton>\n      );\n  }\n\n  _handle_AuthorizedUserIcon_TouchTap = ( event ) =>\n  {\n    this.setState( {\n      Popover_AuthorizedUser_IsOpen: true,\n      anchorEl: event.currentTarget,\n    } );\n  };\n}\n\nAppBar_Auth.contextTypes = {\n  router: React.PropTypes.object.isRequired\n};\n\n\nexport default Relay.createContainer( AppBar_Auth, {\n  fragments: {\n    Viewer: () => Relay.QL`\n      fragment on Viewer {\n        User_IsAnonymous,\n        User_DisplayName,\n      }\n    `,\n  },\n});\n"]}