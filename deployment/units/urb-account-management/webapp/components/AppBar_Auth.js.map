{"version":3,"sources":["../../../../../units/urb-account-management/webapp/components/AppBar_Auth.js"],"names":["styles","popover","padding","isAccountNameAcceptable","AccountName","length","AppBar_Auth","props","context","_callback_OpenAuthenticationChallenge","setState","User_AccountName","User_AccountPassword","Account_information_Supplied","Dialog_AuthenticationChallenge_IsOpen","Dialog_AuthenticationInProgress_IsOpen","Dialog_AuthenticationFailed_IsOpen","Dialog_CreateUser_IsOpen","Dialog_CreateUserInProgress_IsOpen","Dialog_CreateUserFailed_IsOpen","Dialog_LogOutConfirmation_IsOpen","Dialog_LogOutInProgress_IsOpen","Dialog_LogOutFailed_IsOpen","Popover_AuthorizedUser_IsOpen","Dialog_AuthenticationChallenge_Open","_handle_onChange_AuthenticationChallenge_User_AccountName","event","target","value","_handle_onChange_AuthenticationChallenge_User_AccountName_or_Password","state","_handle_onKeyDown_AuthenticationChallenge_User_AccountName","e","keyCode","refs","focus","_handle_onChange_AuthenticationChallenge_User_AccountPassword","_handle_onKeyDown_AuthenticationChallenge_User_AccountPassword","_handle_onTouchTap_AuthenticationChallenge_LogIn","AccountPassword","loc","window","location","host","protocol","hostname","port","_handle_Authentication_Response_Success","response","_handle_Authentication_Response_Failure","_handle_onTouchTap_AuthenticationChallenge_CreateUser","Dialog_CreateUser_AccountPasswordStrength","_handle_onTouchTap_AuthenticationChallenge_Cancel","_handle_onTouchTap_AuthenticationInProgress_Cancel","_handle_onTouchTap_LogInFailure_OK","_handle_onChange_CreateUser_User_AccountName","_handle_onChange_CreateUser_User_AccountName_or_Password","_handle_onKeyDown_CreateUser_User_AccountName","_handle_onChange_CreateUser_User_AccountPassword","_handle_onKeyDown_CreateUser_User_AccountPassword","_handle_onTouchTap_CreateUser_Create","passwordScore","_handle_CreateUser_Response_Success","_handle_CreateUser_Response_Failure","_handle_onTouchTap_CreateUser_Cancel","_handle_onTouchTap_CreateUserInProgress_Cancel","_handle_onTouchTap_CreateUserFailed_OK","_handle_onTouchTap_LogOutConfirmation_LogOut","_handle_LogOutConfirmation_Response_Success","_handle_LogOutConfirmation_Response_Failure","_handle_onTouchTap_LogOutConfirmation_Cancel","_handle_onTouchTap_LogOutInProgress_Cancel","_handle_onTouchTap_LogOutFailed_OK","_handle_Popover_AuthorizedUser_Profile","router","push","_handle_Popover_AuthorizedUser_ChangePassword","_handle_Popover_AuthorizedUser_LogInAsADifferentUser","_handle_Popover_AuthorizedUser_LogOut","_handle_Popover_AuthorizedUser_Close","_handle_AuthorizedUserIcon_TouchTap","anchorEl","currentTarget","responseJSON","JSON","parse","success","Error","err","replace","href","message","error","Dialog_AuthenticationFailed_Message","Dialog_CreateUserFailed_Message","Dialog_LogOutFailed_Message","Viewer","horizontal","vertical","User_IsAnonymous","Dialog_AuthenticationChallenge","Dialog_AuthenticationInProgress","Dialog_AuthenticationFailed","Dialog_CreateUser","Dialog_CreateUserInProgress","Dialog_CreateUserFailed","Popover_AuthorizedUser","Dialog_LogOutConfirmation","Dialog_LogOutInProgress","Dialog_LogOutFailed","Component","contextTypes","object","isRequired","createContainer","fragments"],"mappings":"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","file":"AppBar_Auth.js","sourcesContent":["// @flow\n\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport Relay from 'react-relay'\n\nimport Dialog from 'material-ui/Dialog'\nimport Divider from 'material-ui/Divider'\nimport FlatButton from 'material-ui/FlatButton'\nimport IconButton from 'material-ui/IconButton'\nimport IconSocialPerson from 'material-ui/svg-icons/social/person'\nimport IconSocialPersonOutline from 'material-ui/svg-icons/social/person-outline'\nimport LinearProgress from 'material-ui/LinearProgress'\nimport { List, ListItem } from 'material-ui/List'\nimport Popover from 'material-ui/Popover'\nimport Subheader from 'material-ui/Subheader'\nimport TextField from 'material-ui/TextField'\nimport { white } from 'material-ui/styles/colors'\nimport { registerAuthenticationRequiredCallback } from './RequiresAuthentication.js'\n\nimport {\n  AccountNameLengthMin,\n  AccountPasswordLengthMin,\n  AccountPasswordStrengthMin,\n  AccountPasswordStrengthGood,\n  AccountNameAlias,\n  AccountNameAdditionalValidation,\n} from '../../../../configuration/units/urb-account-management/accountNameAndPasswordRequirements'\nimport {\n  ExtensionsForLogIn,\n  ExtensionsForCreateUser,\n} from '../../../../configuration/units/urb-account-management/webapp/components/AccountManagementExtensions'\nimport { postXHR } from '../../../../webapp/scripts/XHR'\nimport scorePassword from '../../../../configuration/units/urb-account-management/scripts/scorePassword'\nimport UserListItem from '../../../../configuration/webapp/components/UserListItem'\n\nconst styles = {\n  popover: {\n    padding: 10,\n  },\n}\n\nfunction isAccountNameAcceptable(AccountName) {\n  if (AccountName.length < AccountNameLengthMin) return false\n\n  return AccountNameAdditionalValidation(AccountName)\n}\n\nclass AppBar_Auth extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n\n    this.state = {\n      User_AccountName: '',\n      User_AccountPassword: '',\n      Account_information_Supplied: false,\n      Dialog_AuthenticationChallenge_IsOpen: false,\n      Dialog_AuthenticationInProgress_IsOpen: false,\n      Dialog_AuthenticationFailed_IsOpen: false,\n      Dialog_CreateUser_IsOpen: false,\n      Dialog_CreateUserInProgress_IsOpen: false,\n      Dialog_CreateUserFailed_IsOpen: false,\n      Dialog_LogOutConfirmation_IsOpen: false,\n      Dialog_LogOutInProgress_IsOpen: false,\n      Dialog_LogOutFailed_IsOpen: false,\n      Popover_AuthorizedUser_IsOpen: false,\n    }\n  }\n\n  // Handle popping open the login dialog if authentication is required\n  componentWillMount() {\n    registerAuthenticationRequiredCallback(this._callback_OpenAuthenticationChallenge)\n  }\n\n  componentWillUnmount() {\n    registerAuthenticationRequiredCallback(null)\n  }\n\n  _callback_OpenAuthenticationChallenge = () => {\n    this.setState({\n      User_AccountName: '',\n      User_AccountPassword: '',\n      Account_information_Supplied: false,\n      Dialog_AuthenticationChallenge_IsOpen: true,\n      Dialog_AuthenticationInProgress_IsOpen: false,\n      Dialog_AuthenticationFailed_IsOpen: false,\n      Dialog_CreateUser_IsOpen: false,\n      Dialog_CreateUserInProgress_IsOpen: false,\n      Dialog_CreateUserFailed_IsOpen: false,\n      Dialog_LogOutConfirmation_IsOpen: false,\n      Dialog_LogOutInProgress_IsOpen: false,\n      Dialog_LogOutFailed_IsOpen: false,\n      Popover_AuthorizedUser_IsOpen: false,\n    })\n  }\n\n  //\n\n  _handle_Authentication_Response_Success(response) {\n    try {\n      let responseJSON = JSON.parse(response)\n      if (responseJSON.success != true) throw new Error('Login failed')\n    } catch (err) {\n      this._handle_Authentication_Response_Failure('1')\n      return\n    }\n\n    location.replace(location.href)\n  }\n\n  _handle_Authentication_Response_Failure(response: string) {\n    let message\n    try {\n      let responseJSON = JSON.parse(response)\n      message = responseJSON.error\n    } catch (err) {\n      message = 'Improper server response'\n    }\n\n    this.setState({\n      Dialog_AuthenticationInProgress_IsOpen: false,\n      Dialog_AuthenticationFailed_IsOpen: true,\n      Dialog_AuthenticationFailed_Message: message,\n    })\n  }\n\n  //\n\n  _handle_CreateUser_Response_Success(response) {\n    try {\n      let responseJSON = JSON.parse(response)\n      if (responseJSON.success != true) throw new Error('New User Creation failed')\n    } catch (err) {\n      this._handle_CreateUser_Response_Failure('1')\n      return\n    }\n\n    location.replace(location.href)\n  }\n\n  _handle_CreateUser_Response_Failure(response: string) {\n    let message\n    try {\n      let responseJSON = JSON.parse(response)\n      message = responseJSON.error\n    } catch (err) {\n      message = 'Improper server response'\n    }\n\n    this.setState({\n      Dialog_CreateUserInProgress_IsOpen: false,\n      Dialog_CreateUserFailed_IsOpen: true,\n      Dialog_CreateUserFailed_Message: message,\n    })\n  }\n\n  //\n\n  _handle_LogOutConfirmation_Response_Success(response) {\n    try {\n      let responseJSON = JSON.parse(response)\n      if (responseJSON.success != true) throw new Error('Log Out failed')\n    } catch (err) {\n      this._handle_LogOutConfirmation_Response_Failure('1')\n      return\n    }\n\n    location.replace(location.href)\n  }\n\n  _handle_LogOutConfirmation_Response_Failure(response) {\n    let message\n    try {\n      let responseJSON = JSON.parse(response)\n      message = responseJSON.error\n    } catch (err) {\n      message = 'Improper server response'\n    }\n\n    this.setState({\n      Dialog_LogOutInProgress_IsOpen: false,\n      Dialog_LogOutFailed_IsOpen: true,\n      Dialog_LogOutFailed_Message: message,\n    })\n  }\n\n  //\n\n  //\n\n  Dialog_AuthenticationChallenge() {\n    return (\n      <Dialog\n        open={this.state.Dialog_AuthenticationChallenge_IsOpen}\n        title=\"Log In\"\n        actions={[\n          <FlatButton\n            key=\"CreateUser\"\n            label=\"Create User\"\n            secondary={true}\n            onTouchTap={this._handle_onTouchTap_AuthenticationChallenge_CreateUser}\n          />,\n          <FlatButton\n            key=\"Cancel\"\n            label=\"Cancel\"\n            onTouchTap={this._handle_onTouchTap_AuthenticationChallenge_Cancel}\n          />,\n          <FlatButton\n            key=\"LogIn\"\n            label=\"Log In\"\n            primary={true}\n            onTouchTap={this._handle_onTouchTap_AuthenticationChallenge_LogIn}\n            disabled={!this.state.Account_information_Supplied}\n          />,\n        ]}\n      >\n        <TextField\n          floatingLabelText={AccountNameAlias}\n          fullWidth={true}\n          value={this.state.User_AccountName}\n          onKeyDown={this._handle_onKeyDown_AuthenticationChallenge_User_AccountName}\n          onChange={this._handle_onChange_AuthenticationChallenge_User_AccountName}\n        />\n        <TextField\n          type=\"password\"\n          floatingLabelText=\"Password\"\n          fullWidth={true}\n          value={this.state.User_AccountPassword}\n          onKeyDown={this._handle_onKeyDown_AuthenticationChallenge_User_AccountPassword}\n          onChange={this._handle_onChange_AuthenticationChallenge_User_AccountPassword}\n          ref=\"User_AccountPassword\"\n        />\n        <ExtensionsForLogIn />\n      </Dialog>\n    )\n  }\n\n  Dialog_AuthenticationChallenge_Open = () => {\n    this.setState({\n      Dialog_AuthenticationChallenge_IsOpen: true,\n    })\n  }\n\n  _handle_onChange_AuthenticationChallenge_User_AccountName = event => {\n    this.setState({ User_AccountName: event.target.value })\n    this._handle_onChange_AuthenticationChallenge_User_AccountName_or_Password(\n      event.target.value,\n      this.state.User_AccountPassword,\n    )\n  }\n\n  _handle_onKeyDown_AuthenticationChallenge_User_AccountName = e => {\n    if (e.keyCode === 13) this.refs.User_AccountPassword.focus()\n  }\n\n  _handle_onChange_AuthenticationChallenge_User_AccountPassword = event => {\n    this.setState({ User_AccountPassword: event.target.value })\n    this._handle_onChange_AuthenticationChallenge_User_AccountName_or_Password(\n      this.state.User_AccountName,\n      event.target.value,\n    )\n  }\n\n  _handle_onKeyDown_AuthenticationChallenge_User_AccountPassword = e => {\n    if (e.keyCode === 13) this._handle_onTouchTap_AuthenticationChallenge_LogIn()\n  }\n\n  _handle_onChange_AuthenticationChallenge_User_AccountName_or_Password = (\n    AccountName,\n    AccountPassword,\n  ) => {\n    this.setState({\n      Account_information_Supplied:\n        isAccountNameAcceptable(AccountName) && AccountPassword.length >= AccountPasswordLengthMin,\n    })\n  }\n\n  _handle_onTouchTap_AuthenticationChallenge_LogIn = () => {\n    this.setState({\n      Dialog_AuthenticationChallenge_IsOpen: false,\n      Dialog_AuthenticationInProgress_IsOpen: true,\n    })\n\n    var loc = window.location\n    var host = loc.protocol + '//' + loc.hostname + ':' + loc.port\n\n    postXHR(\n      host + '/auth/login',\n      {\n        User_AccountName: this.state.User_AccountName,\n        User_AccountPassword: this.state.User_AccountPassword,\n      },\n      response => this._handle_Authentication_Response_Success(response),\n      response => this._handle_Authentication_Response_Failure(response),\n    )\n\n    this.setState({ User_AccountPassword: '' })\n  }\n\n  _handle_onTouchTap_AuthenticationChallenge_CreateUser = () => {\n    this.setState({\n      Dialog_AuthenticationChallenge_IsOpen: false,\n      Dialog_CreateUser_IsOpen: true,\n      Dialog_CreateUser_AccountPasswordStrength: 0,\n      User_AccountPassword: '',\n    })\n  }\n\n  _handle_onTouchTap_AuthenticationChallenge_Cancel = () => {\n    this.setState({\n      Dialog_AuthenticationChallenge_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_AuthenticationInProgress() {\n    return (\n      <Dialog\n        open={this.state.Dialog_AuthenticationInProgress_IsOpen}\n        title=\"Logging In ...\"\n        actions={[\n          <FlatButton\n            key=\"Cancel\"\n            label=\"Cancel\"\n            onTouchTap={this._handle_onTouchTap_AuthenticationInProgress_Cancel}\n          />,\n        ]}\n      >\n        <LinearProgress mode=\"indeterminate\" />\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_AuthenticationInProgress_Cancel = () => {\n    this.setState({\n      Dialog_AuthenticationInProgress_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_AuthenticationFailed() {\n    return (\n      <Dialog\n        open={this.state.Dialog_AuthenticationFailed_IsOpen}\n        title=\"Login failed\"\n        actions={[\n          <FlatButton\n            key=\"OK\"\n            label=\"OK\"\n            primary={true}\n            onTouchTap={this._handle_onTouchTap_LogInFailure_OK}\n          />,\n        ]}\n      >\n        {this.state.Dialog_AuthenticationFailed_Message}\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_LogInFailure_OK = () => {\n    this.setState({\n      Dialog_AuthenticationFailed_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_CreateUser() {\n    return (\n      <Dialog\n        open={this.state.Dialog_CreateUser_IsOpen}\n        title=\"Sign Up\"\n        actions={[\n          <FlatButton\n            key=\"Cancel\"\n            label=\"Cancel\"\n            onTouchTap={this._handle_onTouchTap_CreateUser_Cancel}\n          />,\n          <FlatButton\n            key=\"Create\"\n            label=\"Create\"\n            primary={true}\n            onTouchTap={this._handle_onTouchTap_CreateUser_Create}\n            disabled={\n              this.state.Dialog_CreateUser_AccountPasswordStrength < AccountPasswordStrengthMin ||\n              !isAccountNameAcceptable(this.state.User_AccountName)\n            }\n          />,\n        ]}\n      >\n        <TextField\n          floatingLabelText={AccountNameAlias}\n          fullWidth={true}\n          value={this.state.User_AccountName}\n          onKeyDown={this._handle_onKeyDown_CreateUser_User_AccountName}\n          onChange={this._handle_onChange_CreateUser_User_AccountName}\n        />\n        <TextField\n          type=\"password\"\n          floatingLabelText=\"Password\"\n          fullWidth={true}\n          value={this.state.User_AccountPassword}\n          onKeyDown={this._handle_onKeyDown_CreateUser_User_AccountPassword}\n          onChange={this._handle_onChange_CreateUser_User_AccountPassword}\n          ref=\"User_AccountPassword\"\n        />\n        <br /><br />Password strength\n        <LinearProgress\n          mode=\"determinate\"\n          value={this.state.Dialog_CreateUser_AccountPasswordStrength}\n          color={\n            this.state.Dialog_CreateUser_AccountPasswordStrength < AccountPasswordStrengthMin\n              ? '#ff0000'\n              : this.state.Dialog_CreateUser_AccountPasswordStrength < AccountPasswordStrengthGood\n                ? '#c0c000'\n                : '#00d000'\n          }\n        />\n        <ExtensionsForCreateUser />\n      </Dialog>\n    )\n  }\n\n  _handle_onChange_CreateUser_User_AccountName = event => {\n    this.setState({ User_AccountName: event.target.value })\n    this._handle_onChange_CreateUser_User_AccountName_or_Password(\n      event.target.value,\n      this.state.User_AccountPassword,\n    )\n  }\n\n  _handle_onKeyDown_CreateUser_User_AccountName = e => {\n    if (e.keyCode === 13) this.refs.User_AccountPassword.focus()\n  }\n\n  _handle_onChange_CreateUser_User_AccountPassword = event => {\n    this.setState({ User_AccountPassword: event.target.value })\n    this._handle_onChange_CreateUser_User_AccountName_or_Password(\n      this.state.User_AccountName,\n      event.target.value,\n    )\n  }\n\n  _handle_onKeyDown_CreateUser_User_AccountPassword = e => {\n    if (e.keyCode === 13) this._handle_onTouchTap_CreateUser_Create()\n  }\n\n  _handle_onChange_CreateUser_User_AccountName_or_Password = (AccountName, AccountPassword) => {\n    const passwordScore = scorePassword(AccountPassword)\n    this.setState({\n      Account_information_Supplied:\n        isAccountNameAcceptable(AccountName) && AccountPassword.length >= AccountPasswordLengthMin,\n      Dialog_CreateUser_AccountPasswordStrength: passwordScore,\n    })\n  }\n\n  _handle_onTouchTap_CreateUser_Create = () => {\n    this.setState({\n      Dialog_CreateUser_IsOpen: false,\n      Dialog_CreateUserInProgress_IsOpen: true,\n    })\n\n    var loc = window.location\n    var host = loc.protocol + '//' + loc.hostname + ':' + loc.port\n\n    postXHR(\n      host + '/auth/createuser',\n      {\n        User_AccountName: this.state.User_AccountName,\n        User_AccountPassword: this.state.User_AccountPassword,\n      },\n      response => this._handle_CreateUser_Response_Success(response),\n      response => this._handle_CreateUser_Response_Failure(response),\n    )\n  }\n\n  _handle_onTouchTap_CreateUser_Cancel = () => {\n    this.setState({\n      Dialog_CreateUser_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_CreateUserInProgress() {\n    return (\n      <Dialog\n        open={this.state.Dialog_CreateUserInProgress_IsOpen}\n        title=\"Creating user ...\"\n        actions={[\n          <FlatButton\n            key=\"Cancel\"\n            label=\"Cancel\"\n            onTouchTap={this._handle_onTouchTap_CreateUserInProgress_Cancel}\n          />,\n        ]}\n      >\n        <LinearProgress mode=\"indeterminate\" />\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_CreateUserInProgress_Cancel = () => {\n    this.setState({\n      Dialog_CreateUserInProgress_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_CreateUserFailed() {\n    return (\n      <Dialog\n        open={this.state.Dialog_CreateUserFailed_IsOpen}\n        title=\"Creating user failed\"\n        actions={[\n          <FlatButton\n            key=\"OK\"\n            label=\"OK\"\n            primary={true}\n            onTouchTap={this._handle_onTouchTap_CreateUserFailed_OK}\n          />,\n        ]}\n      >\n        {this.state.Dialog_CreateUserFailed_Message}\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_CreateUserFailed_OK = () => {\n    this.setState({\n      Dialog_CreateUserFailed_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_LogOutConfirmation() {\n    return (\n      <Dialog\n        open={this.state.Dialog_LogOutConfirmation_IsOpen}\n        title=\"Log Out\"\n        actions={[\n          <FlatButton\n            key=\"Cancel\"\n            label=\"Cancel\"\n            onTouchTap={this._handle_onTouchTap_LogOutConfirmation_Cancel}\n          />,\n          <FlatButton\n            key=\"LogOut\"\n            label=\"Log Out\"\n            primary={true}\n            onTouchTap={this._handle_onTouchTap_LogOutConfirmation_LogOut}\n          />,\n        ]}\n      >\n        <List>\n          <Subheader>You are currently logged in as</Subheader>\n          <UserListItem Viewer={this.props.Viewer} />\n        </List>\n        <List>\n          <Subheader>Are you sure you want to log out?</Subheader>\n        </List>\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_LogOutConfirmation_LogOut = () => {\n    this.setState({\n      Dialog_LogOutConfirmation_IsOpen: false,\n      Dialog_LogOutInProgress_IsOpen: true,\n    })\n\n    var loc = window.location\n    var host = loc.protocol + '//' + loc.hostname + ':' + loc.port\n\n    postXHR(\n      host + '/auth/logout',\n      {},\n      response => this._handle_LogOutConfirmation_Response_Success(response),\n      response => this._handle_LogOutConfirmation_Response_Failure(response),\n    )\n  }\n\n  _handle_onTouchTap_LogOutConfirmation_Cancel = () => {\n    this.setState({\n      Dialog_LogOutConfirmation_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_LogOutInProgress() {\n    return (\n      <Dialog\n        open={this.state.Dialog_LogOutInProgress_IsOpen}\n        title=\"Logging out ...\"\n        actions={[\n          <FlatButton\n            key=\"Cancel\"\n            label=\"Cancel\"\n            onTouchTap={this._handle_onTouchTap_LogOutInProgress_Cancel}\n          />,\n        ]}\n      >\n        <LinearProgress mode=\"indeterminate\" />\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_LogOutInProgress_Cancel = () => {\n    this.setState({\n      Dialog_LogOutInProgress_IsOpen: false,\n    })\n  }\n\n  //\n\n  Dialog_LogOutFailed() {\n    return (\n      <Dialog\n        open={this.state.Dialog_LogOutFailed_IsOpen}\n        title=\"Log out failed.\"\n        actions={[\n          <FlatButton\n            key=\"OK\"\n            label=\"OK\"\n            primary={true}\n            onTouchTap={this._handle_onTouchTap_LogOutFailed_OK}\n          />,\n        ]}\n      >\n        <List>\n          <Subheader>You are still logged in as</Subheader>\n          <UserListItem Viewer={this.props.Viewer} />\n        </List>\n        <List>\n          <Subheader>{this.state.Dialog_LogOutFailed_Message}</Subheader>\n        </List>\n      </Dialog>\n    )\n  }\n\n  _handle_onTouchTap_LogOutFailed_OK = () => {\n    this.setState({\n      Dialog_LogOutFailed_IsOpen: false,\n    })\n  }\n\n  //\n\n  Popover_AuthorizedUser() {\n    return (\n      <Popover\n        open={this.state.Popover_AuthorizedUser_IsOpen}\n        anchorEl={this.state.anchorEl}\n        anchorOrigin={{ horizontal: 'left', vertical: 'bottom' }}\n        targetOrigin={{ horizontal: 'left', vertical: 'top' }}\n        onRequestClose={this._handle_Popover_AuthorizedUser_Close}\n      >\n        <div style={styles.popover}>\n          <List>\n            <Subheader>Logged In as</Subheader>\n            <UserListItem Viewer={this.props.Viewer} />\n          </List>\n          <Divider />\n          <List>\n            <ListItem\n              primaryText=\"Profile\"\n              onTouchTap={this._handle_Popover_AuthorizedUser_Profile}\n            />\n            <ListItem\n              primaryText=\"Change Password\"\n              onTouchTap={this._handle_Popover_AuthorizedUser_ChangePassword}\n            />\n          </List>\n          <Divider />\n          <List>\n            <ListItem\n              primaryText=\"Log in as a different user\"\n              onTouchTap={this._handle_Popover_AuthorizedUser_LogInAsADifferentUser}\n            />\n            <ListItem\n              primaryText=\"Log out\"\n              onTouchTap={this._handle_Popover_AuthorizedUser_LogOut}\n            />\n          </List>\n        </div>\n      </Popover>\n    )\n  }\n\n  _handle_Popover_AuthorizedUser_Profile = () => {\n    this.setState({\n      Popover_AuthorizedUser_IsOpen: false,\n    })\n    this.context.router.push('/user')\n  }\n\n  _handle_Popover_AuthorizedUser_ChangePassword = () => {\n    this.setState({\n      Popover_AuthorizedUser_IsOpen: false,\n    })\n    this.context.router.push('/user/update_password')\n  }\n\n  _handle_Popover_AuthorizedUser_LogInAsADifferentUser = () => {\n    this.setState({\n      Popover_AuthorizedUser_IsOpen: false,\n    })\n    this.Dialog_AuthenticationChallenge_Open()\n  }\n\n  _handle_Popover_AuthorizedUser_LogOut = () => {\n    this.setState({\n      Popover_AuthorizedUser_IsOpen: false,\n      Dialog_LogOutConfirmation_IsOpen: true,\n    })\n  }\n\n  _handle_Popover_AuthorizedUser_Close = () => {\n    this.setState({\n      Popover_AuthorizedUser_IsOpen: false,\n    })\n  }\n\n  //\n\n  render() {\n    if (this.props.Viewer.User_IsAnonymous)\n      return (\n        <IconButton\n          key=\"login\"\n          tooltip=\"Log In\"\n          onTouchTap={this.Dialog_AuthenticationChallenge_Open}\n        >\n          <IconSocialPersonOutline color={white} />\n          {this.Dialog_AuthenticationChallenge()}\n          {this.Dialog_AuthenticationInProgress()}\n          {this.Dialog_AuthenticationFailed()}\n          {this.Dialog_CreateUser()}\n          {this.Dialog_CreateUserInProgress()}\n          {this.Dialog_CreateUserFailed()}\n        </IconButton>\n      )\n    else\n      // User has already logged in\n      return (\n        <IconButton\n          key=\"authenticated\"\n          tooltip=\"User menu\"\n          onTouchTap={this._handle_AuthorizedUserIcon_TouchTap}\n        >\n          <IconSocialPerson color={white} />\n          {this.Popover_AuthorizedUser()}\n          {this.Dialog_AuthenticationChallenge()}\n          {this.Dialog_AuthenticationInProgress()}\n          {this.Dialog_AuthenticationFailed()}\n          {this.Dialog_CreateUser()}\n          {this.Dialog_CreateUserInProgress()}\n          {this.Dialog_CreateUserFailed()}\n          {this.Dialog_LogOutConfirmation()}\n          {this.Dialog_LogOutInProgress()}\n          {this.Dialog_LogOutFailed()}\n        </IconButton>\n      )\n  }\n\n  _handle_AuthorizedUserIcon_TouchTap = event => {\n    this.setState({\n      Popover_AuthorizedUser_IsOpen: true,\n      anchorEl: event.currentTarget,\n    })\n  }\n}\n\nAppBar_Auth.contextTypes = {\n  router: PropTypes.object.isRequired,\n}\n\nexport default Relay.createContainer(AppBar_Auth, {\n  fragments: {\n    Viewer: () => Relay.QL`\n      fragment on Viewer {\n        User_IsAnonymous,\n        User_DisplayName,\n      }\n    `,\n  },\n})\n"]}